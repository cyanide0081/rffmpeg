# **RFFmpeg**

Windows command-line/console window tool for automating FFmpeg file conversions inside a specific directory

* Run with `--help` to read the help page (this page is much more thorough though)

<br>

## **Installation**

In order to use this tool you will first need to install FFmpeg, so here are two ways to do it:

<br>

### **Method 1:** Using _winget_ (recommended)

If you're using Windows 10.1709 or newer, you can install it by simply opening PowerShell and running: 

    > winget install ffmpeg

<br>

### **Method 2:** Downloading it directly


1. download the latest Windows build of [**FFmpeg**](https://www.gyan.dev/ffmpeg/builds/ffmpeg-release-essentials.zip)
     
2. Extract the archive and add the _C:\ffmpeg\bin_ folder - the one containing the executables - to your `PATH`  by running PS as admin and pasting the following command: 
    
        > [Environment]::SetEnvironmentVariable("Path", $env:Path + ";C:\ffmpeg\bin", [EnvironmentVariableTarget]::Machine)
   
3. (**optional**) move _rffmpeg.exe_ to your _C:\ffmpeg\bin_ folder so you can call it from any directory

<br>

## **Usage**

This tool's argument syntax is not that different from FFmpeg itself, with the basic structure being:
 
    > rffmpeg -path <in-path> -in <in-fmt(s)> -opts <parameters> -out <out-ext>

Here's a basic RFFmpeg command that looks for wav files and converts them to mp3:

    > rffmpeg -path C:\Users\Music -fmt wav -ext mp3
  

<br>

 ### **Arguments**
 * __\*__**path** : must hold a valid directory (or list thereof) or else the application will close
    * It can also hold a list of directories separated by asterisks, such as: `-path 'C:\Users\Music*C:\音乐'`

 * __\*__**in**   : one or more formats you wish to transcode separated by commas, like: `-in mp4,m4v,mov`

 * **opts**      : ffmpeg conversion parameters sorrounded by quotes, as in: `-opts '-c:v vp9 -crf 32 -c:a copy'` 

 * __\*__**out**  : specifies the extension your output files will use\*\*

 __\*__ All arguments marked with an must not be empty for the tool to work

 __\*\*__ If you specify identical input and output formats, use the **--newfolder** option otherwise the program will refuse to run 

<br>

 ### **Additional Flags**

You can also pass any of the flags below to help you organize your batch conversions a little

 * **--newfolder**   : puts your converted files inside a new folder
    * You can also give it a custom name using an equal sign, as in: `--newfolder=你好`

 * **--delete**      : deletes the original files permanently after conversion (**don't use this if you're not sure the conversion will work properly**)

 * **--overwrite**   : automatically overwrites files if they conflict with the output files generated by FFmpeg  (the program appends an index by default)

 * **--norecursion** : disables file searches inside subfolders, in case your directory contains many folders you  don't want to mess with

<br>

### **A Slightly more Complex Example**

Here's an example of a more specific call to rffmpeg that looks inside two specific folders for .flac and .m4a files, converts them to .opus using the libopus codec, and finally stores them in a new subfolder named 'transcoded'

    > rffmpeg -path 'C:\Users\User\Music\Album1*C:\Users\User\Music\Album2' -in flac,m4a -opts '-c:a libopus -vbr on -b:a 128k' -out opus --newfolder=transcoded

***

<br>

**p.s.:** you will get a Windows SmartScreen warning the first time you run it (assuming you have it enabled) 